<!doctype html>
<html>
<body>
<h2>Admin</h2>
<table border="1" id="t"></table>

<script>
google.script.run.withSuccessHandler(rows=>{
  t.innerHTML="<tr>"+Object.keys(rows[0]).map(h=>"<th>"+h+"</th>").join("")+"<th>Action</th></tr>";
  rows.forEach(r=>{
    t.innerHTML+=`<tr>
      ${Object.values(r).map(v=>"<td>"+v+"</td>").join("")}
      <td><button onclick="cf('${r.booking_id}')">Confirm</button></td>
    </tr>`;
  });
}).getBookings();

function cf(id){
  google.script.run.withSuccessHandler(()=>alert("Confirmed")).confirmBooking(id);
}
</script>
</body>
</html>
