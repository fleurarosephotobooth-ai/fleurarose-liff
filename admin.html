<!DOCTYPE html>
<html>
<body>
<h2>Fleurarose Admin</h2>
<table border="1" cellpadding="6">
  <thead>
    <tr>
      <th>ID</th><th>‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</th><th>‡∏á‡∏≤‡∏ô</th><th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th><th>üí¨</th><th>Confirm</th>
    </tr>
  </thead>
  <tbody id="rows"></tbody>
</table>

<script>
google.script.run.withSuccessHandler(data=>{
  const tb = document.getElementById('rows');
  data.forEach(r=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${r.booking_id}</td>
      <td>${r.customer_name}</td>
      <td>${r.job_type}</td>
      <td>${r.status}</td>
      <td><a href="https://line.me/R/oaMessage/@262clszf/?chat_id=${r.line_user_id}" target="_blank">üí¨</a></td>
      <td><button onclick="confirm('${r.booking_id}')">Confirm</button></td>
    `;
    tb.appendChild(tr);
  });
}).getBookings();

function confirm(id){
  google.script.run.confirmBooking(id);
  alert('Confirmed');
  location.reload();
}
</script>
</body>
</html>
