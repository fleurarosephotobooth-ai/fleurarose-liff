<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1">
<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
<style>
body{font-family:sans-serif;background:#f6f7fb}
.card{background:#fff;margin:16px;padding:16px;border-radius:16px}
input,select,textarea,button{width:100%;margin-top:8px;padding:12px}
button{background:#111;color:#fff;border-radius:12px}
</style>
</head>
<body>
<div class="card">
<h2>Fleurarose Booking</h2>

<input id="name" placeholder="ชื่อ">
<input id="phone" placeholder="เบอร์">
<input id="date" type="date">

<select id="slot">
  <option value="AM">เช้า</option>
  <option value="PM">เย็น</option>
</select>

<select id="job">
  <option>Photobooth</option>
  <option>Automate</option>
  <option>Telephone booth สีฟ้าขาว 1</option>
  <option>Telephone booth สีฟ้าขาว 2</option>
  <option>Telephone booth สีน้ำตาล</option>
</select>

<input id="loc" placeholder="สถานที่">
<textarea id="note"></textarea>

<button onclick="submit()">ส่งคำขอจอง</button>
<div id="msg"></div>
</div>

<script>
let profile={};

liff.init({ liffId:"2008882886-ubJheqfN" }).then(()=>{
  if(!liff.isLoggedIn()) return liff.login();
  return liff.getProfile();
}).then(p=>profile=p);

function submit(){
  google.script.run.withSuccessHandler(r=>{
    msg.textContent="จองสำเร็จ ✅ "+r.booking_id;
  }).submitBooking({
    lineUserId: profile.userId,
    displayName: profile.displayName,
    customerName: name.value,
    phone: phone.value,
    eventDate: date.value,
    timeSlot: slot.value,
    jobType: job.value,
    location: loc.value,
    notes: note.value
  });
}
</script>
</body>
</html>
